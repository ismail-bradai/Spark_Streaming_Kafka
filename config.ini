# Configuration File for Streaming Pipeline
# Modify these values to customize behavior

[KAFKA]
# Kafka broker address
BOOTSTRAP_SERVERS = localhost:9092

# Topic for sales stream
TOPIC_NAME = ventes_stream

# Starting offset (latest or earliest)
STARTING_OFFSET = latest

# Max records per partition per batch
MAX_RATE_PER_PARTITION = 1000

# Connection timeout (ms)
CONNECTION_TIMEOUT_MS = 30000

[SPARK]
# Application name
APP_NAME = KafkaToDeltaStreaming

# Driver memory
DRIVER_MEMORY = 2g

# Executor memory
EXECUTOR_MEMORY = 2g

# Number of partitions for writes
OUTPUT_PARTITIONS = 1

# Log level (ERROR, WARN, INFO, DEBUG)
LOG_LEVEL = WARN

[DELTA]
# Base path for Delta Lake storage
BASE_PATH = /tmp/delta

# Bronze layer (raw data)
BRONZE_PATH = /tmp/delta/bronze/ventes_stream

# Silver layer paths
SILVER_AGGREGATES_PATH = /tmp/delta/silver/ventes_aggreges
SILVER_COUNTRY_PATH = /tmp/delta/silver/ventes_par_pays
SILVER_SEGMENT_PATH = /tmp/delta/silver/ventes_par_segment

# Checkpoint location for stream recovery
CHECKPOINT_PATH = /tmp/delta/checkpoints/ventes_bronze

# Vacuum retention (hours)
VACUUM_RETENTION_HOURS = 24

[STREAMING]
# Watermark delay for late data (e.g., "10 minutes", "1 hour")
WATERMARK_DELAY = 10 minutes

# Output mode (append, update, complete)
OUTPUT_MODE = append

# Checkpoint interval (ms) - auto-managed if not set
# CHECKPOINT_INTERVAL_MS = 30000

[PRODUCER]
# Sales generation interval (seconds)
BATCH_INTERVAL = 2

# Number of products
NUM_PRODUCTS = 6

# Number of clients
NUM_CLIENTS = 5

# Max quantity per sale
MAX_QUANTITY = 5

# Min quantity per sale
MIN_QUANTITY = 1

[ANALYTICS]
# Loyalty threshold (minimum purchases to be considered loyal)
LOYALTY_THRESHOLD = 2

# Premium spending threshold (EUR)
PREMIUM_THRESHOLD = 500

# Standard spending threshold (EUR)
STANDARD_THRESHOLD = 100

# Default to Economy below STANDARD_THRESHOLD

[MONITORING]
# Metrics update interval (seconds)
METRICS_INTERVAL = 30

# Enable detailed logging
VERBOSE_LOGGING = true

# Enable metrics dashboard
ENABLE_METRICS = true

[PERFORMANCE]
# Batch size for Delta writes
BATCH_SIZE = 1000

# Enable adaptive query execution
ADAPTIVE_EXECUTION = true

# Shuffle partitions
SHUFFLE_PARTITIONS = 200

# Autosave logs
ENABLE_LOGGING = true

[DEVELOPMENT]
# Development mode (extra logging)
DEV_MODE = false

# Console output for debug
CONSOLE_OUTPUT = false

# Sample size for previews
SAMPLE_SIZE = 10

# Testing mode (use smaller batches)
TEST_MODE = false
